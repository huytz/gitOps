# -- Replica count for the deployment. It is not advised to run more than one replica.
replicaCount: 1
image:
  # -- Default image repository
  repository: quay.io/argoprojlabs/argocd-image-updater
  # -- Default image pull policy
  pullPolicy: Always
  # -- Overrides the image tag whose default is the chart appVersion
  tag: ""

config:
  # -- Name of the ConfigMap
  name: argocd-image-updater-config
  # -- API kind that is used to manage Argo CD applications (`kubernetes` or `argocd`)
  applicationsAPIKind: "argocd"

  # Described in detail here https://argocd-image-updater.readthedocs.io/en/stable/install/reference/#flags
  # Note: this is only relevant if config.applicationsAPIKind == 'argocd'
  argocd:
    # -- Use the gRPC-web protocol to connect to the Argo CD API
    grpcWeb: false
    # -- Connect to the Argo CD API server at server address
    serverAddress: "argocd-server.argocd.svc.cluster.local:80"
    # -- If specified, the certificate of the Argo CD API server is not verified.
    insecure: true
    # -- If specified, use an unencrypted HTTP connection to the Argo CD API instead of TLS.
    plaintext: true
    token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhbGljZTphcGlLZXkiLCJuYmYiOjE3NTQ4MjM1NTMsImlhdCI6MTc1NDgyMzU1MywianRpIjoiNDdiYzAwZTUtYTUzMC00YTE1LTk0YzItMTBkNWU1NDgxYzlhIn0.5JEy-sT_HU3t4aCriaCteMWxUWplBmO1W2TQVGdOXZ0"
    # -- Name of the Secret containing the token
    tokenSecretName: "argocd-image-updater-secret"

  # -- Disable kubernetes events
  disableKubeEvents: false

  # -- Username to use for Git commits
  gitCommitUser: "huytz"

  # -- E-Mail address to use for Git commits
  gitCommitMail: ""

  # -- Changing the Git commit message
  gitCommitTemplate: "feat: update {{.AppName}} to {{.ImageName}}:{{.Tag}} ({{.PrevTag}} -> {{.Tag}})"

  # -- Enables sign off on commits
  gitCommitSignOff: false

  # -- Method used to sign Git commits. `openpgp` or `ssh`
  gitCommitSigningMethod: ""

  # -- Argo CD Image Update log level
  logLevel: "debug"
  
  # -- Platform preferences for image selection
  # This fixes the platform compatibility issue where darwin/amd64 is requested but only linux images exist
  platforms: "linux/amd64"
  
  registries: []
  
  sshConfig:
    # -- Name of the sshConfig ConfigMap
    name: argocd-image-updater-ssh-config
    # -- Argo CD Image Updater ssh client parameter configuration
    config: |
      Host *
        PubkeyAcceptedAlgorithms +ssh-rsa
        HostkeyAlgorithms +ssh-rsa

# whether to mount authentication scripts, if enabled, the authentication scripts will be mounted on /scripts that can be used to authenticate with registries (Azure, ECR)
# refer to https://argocd-image-updater.readthedocs.io/en/stable/configuration/registries/#specifying-credentials-for-accessing-container-registries for more info
authScripts:
  # -- Whether to mount the defined scripts that can be used to authenticate with a registry, the scripts will be mounted at `/scripts`
  enabled: false

rbac:
  # -- Enable RBAC creation
  enabled: true

# Metrics configuration
metrics:
  # -- Deploy metrics service
  enabled: true
