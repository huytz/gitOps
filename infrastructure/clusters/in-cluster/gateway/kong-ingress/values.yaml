kong:
  # Disable PostgreSQL subchart in ingress dependency
  postgresql:
    enabled: false
  
  controller:
    enabled: true
    # Proxy service name override
    # Note: Must match Kong controller's expected service name pattern
    proxy:
      nameOverride: "{{ .Release.Name }}-kong-proxy"
    
    # Service account configuration
    serviceAccount:
      create: true
      automountServiceAccountToken: false

    # Controller environment variables
    env:
      database: "off"
      role: traditional

    # Kong Ingress Controller configuration
    ingressController:
      enabled: true
      ingressClass: kong
      createIngressClass: true
      ingressClassAnnotations: {}

      # Controller image configuration
      image:
        repository: kong/kubernetes-ingress-controller
        tag: "3.5"
        effectiveSemver:

      # Controller arguments
      args: []
      # Gateway API controller name configuration
      # If not specified, defaults to 'konghq.com/kic-gateway-controller'
      # gatewayAPIControllerName: "konghq.com/kic-gateway-controller"

      # Gateway Discovery - Enabled for kong/ingress chart
      gatewayDiscovery:
        enabled: true
        generateAdminApiService: true
        adminApiService:
          namespace: ""
          name: ""

      # Controller environment variables
      env:
        kong_admin_tls_skip_verify: true
        # Gateway API controller name (alternative to gatewayAPIControllerName)
        CONTROLLER_GATEWAY_API_CONTROLLER_NAME: "konghq.com/kic-gateway-controller"
      envFrom: []

      # Admission webhook configuration
      admissionWebhook:
        matchPolicy: Equivalent
        enabled: true
        filterSecrets: false
        failurePolicy: Ignore
        port: 8080

      # RBAC configuration
      rbac:
        create: true
        enableClusterRoles: true
        gatewayAPI:
          enabled: true

      # Health probes
      livenessProbe:
        httpGet:
          path: "/healthz"
          port: 10254
          scheme: HTTP
        initialDelaySeconds: 5
        timeoutSeconds: 5
        periodSeconds: 10
        successThreshold: 1
        failureThreshold: 3

      readinessProbe:
        httpGet:
          path: "/readyz"
          port: 10254
          scheme: HTTP
        initialDelaySeconds: 5
        timeoutSeconds: 5
        periodSeconds: 10
        successThreshold: 1
        failureThreshold: 3

      # Controller resources
      resources:
        limits:
          cpu: 100m
          memory: 256Mi
        requests:
          cpu: 50m
          memory: 128Mi

      # Konnect configuration
      konnect:
        enabled: false

    # Controller deployment configuration
    deployment:
      kong:
        enabled: false  # Gateway is managed separately in kong/ingress chart
      revisionHistoryLimit: 10

  # -----------------------------------------------------------------------------
  # Kong Gateway Configuration
  # -----------------------------------------------------------------------------
  gateway:
    enabled: false
